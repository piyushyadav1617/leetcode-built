/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},M.apply(this,arguments)}var N;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(N||(N={}));const Ye="popstate";function Er(e){e===void 0&&(e={});function t(o,n){let{pathname:c,search:s,hash:u}=o.location;return De("",{pathname:c,search:s,hash:u},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(o,n){return typeof n=="string"?n:te(n)}return jt(t,r,null,e)}function U(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function le(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zt(){return Math.random().toString(36).substr(2,8)}function Ge(e,t){return{usr:e.state,key:e.key,idx:t}}function De(e,t,r,o){return r===void 0&&(r=null),M({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?re(t):t,{state:r,key:t&&t.key||o||zt()})}function te(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function re(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function jt(e,t,r,o){o===void 0&&(o={});let{window:n=document.defaultView,v5Compat:c=!1}=o,s=n.history,u=N.Pop,f=null,w=h();w==null&&(w=0,s.replaceState(M({},s.state,{idx:w}),""));function h(){return(s.state||{idx:null}).idx}function g(){u=N.Pop;let a=h(),E=a==null?null:a-w;w=a,f&&f({action:u,location:L.location,delta:E})}function D(a,E){u=N.Push;let F=De(L.location,a,E);r&&r(F,a),w=h()+1;let x=Ge(F,w),T=L.createHref(F);try{s.pushState(x,"",T)}catch{n.location.assign(T)}c&&f&&f({action:u,location:L.location,delta:1})}function _(a,E){u=N.Replace;let F=De(L.location,a,E);r&&r(F,a),w=h();let x=Ge(F,w),T=L.createHref(F);s.replaceState(x,"",T),c&&f&&f({action:u,location:L.location,delta:0})}function I(a){let E=n.location.origin!=="null"?n.location.origin:n.location.href,F=typeof a=="string"?a:te(a);return U(E,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,E)}let L={get action(){return u},get location(){return e(n,s)},listen(a){if(f)throw new Error("A history only accepts one active listener");return n.addEventListener(Ye,g),f=a,()=>{n.removeEventListener(Ye,g),f=null}},createHref(a){return t(n,a)},createURL:I,encodeLocation(a){let E=I(a);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:D,replace:_,go(a){return s.go(a)}};return L}var z;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(z||(z={}));const Nt=new Set(["lazy","caseSensitive","path","id","index","children"]);function kt(e){return e.index===!0}function lt(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((n,c)=>{let s=[...r,c],u=typeof n.id=="string"?n.id:s.join("-");if(U(n.index!==!0||!n.children,"Cannot specify children on an index route"),U(!o[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),kt(n)){let f=M({},n,{hasErrorBoundary:t(n),id:u});return o[u]=f,f}else{let f=M({},n,{id:u,hasErrorBoundary:t(n),children:void 0});return o[u]=f,n.children&&(f.children=lt(n.children,t,s,o)),f}})}function be(e,t,r){r===void 0&&(r="/");let o=typeof t=="string"?re(t):t,n=je(o.pathname||"/",r);if(n==null)return null;let c=st(e);Bt(c);let s=null;for(let u=0;s==null&&u<c.length;++u)s=qt(c[u],Zt(n));return s}function st(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let n=(c,s,u)=>{let f={relativePath:u===void 0?c.path||"":u,caseSensitive:c.caseSensitive===!0,childrenIndex:s,route:c};f.relativePath.startsWith("/")&&(U(f.relativePath.startsWith(o),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(o.length));let w=we([o,f.relativePath]),h=r.concat(f);c.children&&c.children.length>0&&(U(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),st(c.children,t,h,w)),!(c.path==null&&!c.index)&&t.push({path:w,score:Gt(w,c.index),routesMeta:h})};return e.forEach((c,s)=>{var u;if(c.path===""||!((u=c.path)!=null&&u.includes("?")))n(c,s);else for(let f of dt(c.path))n(c,s,f)}),t}function dt(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,n=r.endsWith("?"),c=r.replace(/\?$/,"");if(o.length===0)return n?[c,""]:[c];let s=dt(o.join("/")),u=[];return u.push(...s.map(f=>f===""?c:[c,f].join("/"))),n&&u.push(...s),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function Bt(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xt(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Ht=/^:\w+$/,Wt=3,$t=2,Kt=1,Vt=10,Yt=-2,Xe=e=>e==="*";function Gt(e,t){let r=e.split("/"),o=r.length;return r.some(Xe)&&(o+=Yt),t&&(o+=$t),r.filter(n=>!Xe(n)).reduce((n,c)=>n+(Ht.test(c)?Wt:c===""?Kt:Vt),o)}function Xt(e,t){return e.length===t.length&&e.slice(0,-1).every((o,n)=>o===t[n])?e[e.length-1]-t[t.length-1]:0}function qt(e,t){let{routesMeta:r}=e,o={},n="/",c=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,w=n==="/"?t:t.slice(n.length)||"/",h=Jt({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},w);if(!h)return null;Object.assign(o,h.params);let g=u.route;c.push({params:o,pathname:we([n,h.pathname]),pathnameBase:ar(we([n,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(n=we([n,h.pathnameBase]))}return c}function Jt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=Qt(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let c=n[0],s=c.replace(/(.)\/+$/,"$1"),u=n.slice(1);return{params:o.reduce((w,h,g)=>{if(h==="*"){let D=u[g]||"";s=c.slice(0,c.length-D.length).replace(/(.)\/+$/,"$1")}return w[h]=er(u[g]||"",h),w},{}),pathname:c,pathnameBase:s,pattern:e}}function Qt(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),le(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,u)=>(o.push(u),"/([^\\/]+)"));return e.endsWith("*")?(o.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),o]}function Zt(e){try{return decodeURI(e)}catch(t){return le(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function er(e,t){try{return decodeURIComponent(e)}catch(r){return le(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function je(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function tr(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:n=""}=typeof e=="string"?re(e):e;return{pathname:r?r.startsWith("/")?r:rr(r,t):t,search:or(o),hash:ir(n)}}function rr(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Ie(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ct(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function nr(e,t,r,o){o===void 0&&(o=!1);let n;typeof e=="string"?n=re(e):(n=M({},e),U(!n.pathname||!n.pathname.includes("?"),Ie("?","pathname","search",n)),U(!n.pathname||!n.pathname.includes("#"),Ie("#","pathname","hash",n)),U(!n.search||!n.search.includes("#"),Ie("#","search","hash",n)));let c=e===""||n.pathname==="",s=c?"/":n.pathname,u;if(o||s==null)u=r;else{let g=t.length-1;if(s.startsWith("..")){let D=s.split("/");for(;D[0]==="..";)D.shift(),g-=1;n.pathname=D.join("/")}u=g>=0?t[g]:"/"}let f=tr(n,u),w=s&&s!=="/"&&s.endsWith("/"),h=(c||s===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(w||h)&&(f.pathname+="/"),f}const we=e=>e.join("/").replace(/\/\/+/g,"/"),ar=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),or=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ir=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ut{constructor(t,r,o,n){n===void 0&&(n=!1),this.status=t,this.statusText=r||"",this.internal=n,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function lr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ft=["post","put","patch","delete"],sr=new Set(ft),dr=["get",...ft],cr=new Set(dr),ur=new Set([301,302,303,307,308]),fr=new Set([307,308]),Oe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},hr={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},qe={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mr=!mt,pr=e=>!!e.hasErrorBoundary;function xr(e){U(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=e.detectErrorBoundary||pr,r={},o=lt(e.routes,t,void 0,r),n,c=M({v7_normalizeFormMethod:!1},e.future),s=null,u=new Set,f=null,w=null,h=null,g=e.hydrationData!=null,D=be(o,e.history.location,e.basename),_=null;if(D==null){let i=Y(404,{pathname:e.history.location.pathname}),{matches:l,route:d}=nt(o);D=l,_={[d.id]:i}}let I=!D.some(i=>i.route.lazy)&&(!D.some(i=>i.route.loader)||e.hydrationData!=null),L,a={historyAction:e.history.action,location:e.history.location,matches:D,initialized:I,navigation:Oe,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_,fetchers:new Map,blockers:new Map},E=N.Pop,F=!1,x,T=!1,S=!1,O=[],k=[],C=new Map,se=0,de=-1,ce=new Map,Me=new Set,ne=new Map,Q=new Map,q=new Map,Pe=!1;function wt(){return s=e.history.listen(i=>{let{action:l,location:d,delta:m}=i;if(Pe){Pe=!1;return}le(q.size===0||m!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let p=$e({currentLocation:a.location,nextLocation:d,historyAction:l});if(p&&m!=null){Pe=!0,e.history.go(m*-1),xe(p,{state:"blocked",location:d,proceed(){xe(p,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),e.history.go(m)},reset(){he(p),H({blockers:new Map(L.state.blockers)})}});return}return J(l,d)}),a.initialized||J(N.Pop,a.location),L}function Rt(){s&&s(),u.clear(),x&&x.abort(),a.fetchers.forEach((i,l)=>Ae(l)),a.blockers.forEach((i,l)=>he(l))}function Dt(i){return u.add(i),()=>u.delete(i)}function H(i){a=M({},a,i),u.forEach(l=>l(a))}function ue(i,l){var d,m;let p=a.actionData!=null&&a.navigation.formMethod!=null&&X(a.navigation.formMethod)&&a.navigation.state==="loading"&&((d=i.state)==null?void 0:d._isRedirect)!==!0,v;l.actionData?Object.keys(l.actionData).length>0?v=l.actionData:v=null:p?v=a.actionData:v=null;let b=l.loaderData?rt(a.loaderData,l.loaderData,l.matches||[],l.errors):a.loaderData;for(let[y]of q)he(y);let R=F===!0||a.navigation.formMethod!=null&&X(a.navigation.formMethod)&&((m=i.state)==null?void 0:m._isRedirect)!==!0;n&&(o=n,n=void 0),H(M({},l,{actionData:v,loaderData:b,historyAction:E,location:i,initialized:!0,navigation:Oe,revalidation:"idle",restoreScrollPosition:Ke(i,l.matches||a.matches),preventScrollReset:R,blockers:new Map(a.blockers)})),T||E===N.Pop||(E===N.Push?e.history.push(i,i.state):E===N.Replace&&e.history.replace(i,i.state)),E=N.Pop,F=!1,T=!1,S=!1,O=[],k=[]}async function Ne(i,l){if(typeof i=="number"){e.history.go(i);return}let{path:d,submission:m,error:p}=Je(i,c,l),v=a.location,b=De(a.location,d,l&&l.state);b=M({},b,e.history.encodeLocation(b));let R=l&&l.replace!=null?l.replace:void 0,y=N.Push;R===!0?y=N.Replace:R===!1||m!=null&&X(m.formMethod)&&m.formAction===a.location.pathname+a.location.search&&(y=N.Replace);let A=l&&"preventScrollReset"in l?l.preventScrollReset===!0:void 0,P=$e({currentLocation:v,nextLocation:b,historyAction:y});if(P){xe(P,{state:"blocked",location:b,proceed(){xe(P,{state:"proceeding",proceed:void 0,reset:void 0,location:b}),Ne(i,l)},reset(){he(P),H({blockers:new Map(a.blockers)})}});return}return await J(y,b,{submission:m,pendingError:p,preventScrollReset:A,replace:l&&l.replace})}function Mt(){if(Se(),H({revalidation:"loading"}),a.navigation.state!=="submitting"){if(a.navigation.state==="idle"){J(a.historyAction,a.location,{startUninterruptedRevalidation:!0});return}J(E||a.historyAction,a.navigation.location,{overrideNavigation:a.navigation})}}async function J(i,l,d){x&&x.abort(),x=null,E=i,T=(d&&d.startUninterruptedRevalidation)===!0,Ft(a.location,a.matches),F=(d&&d.preventScrollReset)===!0;let m=n||o,p=d&&d.overrideNavigation,v=be(m,l,e.basename);if(!v){let j=Y(404,{pathname:l.pathname}),{matches:B,route:K}=nt(m);Ue(),ue(l,{matches:B,loaderData:{},errors:{[K.id]:j}});return}if(wr(a.location,l)&&!(d&&d.submission&&X(d.submission.formMethod))){ue(l,{matches:v});return}x=new AbortController;let b=ve(e.history,l,x.signal,d&&d.submission),R,y;if(d&&d.pendingError)y={[oe(v).route.id]:d.pendingError};else if(d&&d.submission&&X(d.submission.formMethod)){let j=await Et(b,l,d.submission,v,{replace:d.replace});if(j.shortCircuited)return;R=j.pendingActionData,y=j.pendingActionError,p=M({state:"loading",location:l},d.submission),b=new Request(b.url,{signal:b.signal})}let{shortCircuited:A,loaderData:P,errors:$}=await xt(b,l,v,p,d&&d.submission,d&&d.fetcherSubmission,d&&d.replace,R,y);A||(x=null,ue(l,M({matches:v},R?{actionData:R}:{},{loaderData:P,errors:$})))}async function Et(i,l,d,m,p){Se();let v=M({state:"submitting",location:l},d);H({navigation:v});let b,R=ze(m,l);if(!R.route.action&&!R.route.lazy)b={type:z.error,error:Y(405,{method:i.method,pathname:l.pathname,routeId:R.route.id})};else if(b=await ye("action",i,R,m,r,t,L.basename),i.signal.aborted)return{shortCircuited:!0};if(ie(b)){let y;return p&&p.replace!=null?y=p.replace:y=b.location===a.location.pathname+a.location.search,await fe(a,b,{submission:d,replace:y}),{shortCircuited:!0}}if(Re(b)){let y=oe(m,R.route.id);return(p&&p.replace)!==!0&&(E=N.Push),{pendingActionData:{},pendingActionError:{[y.route.id]:b.error}}}if(ee(b))throw Y(400,{type:"defer-action"});return{pendingActionData:{[R.route.id]:b.data}}}async function xt(i,l,d,m,p,v,b,R,y){let A=m;A||(A=M({state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},p));let P=p||v?p||v:A.formMethod&&A.formAction&&A.formData&&A.formEncType?{formMethod:A.formMethod,formAction:A.formAction,formData:A.formData,formEncType:A.formEncType}:void 0,$=n||o,[j,B]=Qe(e.history,a,d,P,l,S,O,k,ne,$,e.basename,R,y);if(Ue(W=>!(d&&d.some(V=>V.route.id===W))||j&&j.some(V=>V.route.id===W)),j.length===0&&B.length===0)return ue(l,M({matches:d,loaderData:{},errors:y||null},R?{actionData:R}:{})),{shortCircuited:!0};if(!T){B.forEach(V=>{let Z=a.fetchers.get(V.key),ge={state:"loading",data:Z&&Z.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};a.fetchers.set(V.key,ge)});let W=R||a.actionData;H(M({navigation:A},W?Object.keys(W).length===0?{actionData:null}:{actionData:W}:{},B.length>0?{fetchers:new Map(a.fetchers)}:{}))}de=++se,B.forEach(W=>C.set(W.key,x));let{results:K,loaderResults:me,fetcherResults:Ce}=await Be(a.matches,d,j,B,i);if(i.signal.aborted)return{shortCircuited:!0};B.forEach(W=>C.delete(W.key));let pe=at(K);if(pe)return await fe(a,pe,{replace:b}),{shortCircuited:!0};let{loaderData:ae,errors:Fe}=tt(a,d,j,me,y,B,Ce,Q);Q.forEach((W,V)=>{W.subscribe(Z=>{(Z||W.done)&&Q.delete(V)})}),At();let Te=We(de);return M({loaderData:ae,errors:Fe},Te||B.length>0?{fetchers:new Map(a.fetchers)}:{})}function ke(i){return a.fetchers.get(i)||hr}function Pt(i,l,d,m){if(mr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");C.has(i)&&Ee(i);let v=be(n||o,d,e.basename);if(!v){Le(i,l,Y(404,{pathname:d}));return}let{path:b,submission:R}=Je(d,c,m,!0),y=ze(v,b);if(F=(m&&m.preventScrollReset)===!0,R&&X(R.formMethod)){St(i,l,b,y,v,R);return}ne.set(i,{routeId:l,path:b}),Lt(i,l,b,y,v,R)}async function St(i,l,d,m,p,v){if(Se(),ne.delete(i),!m.route.action&&!m.route.lazy){let G=Y(405,{method:v.formMethod,pathname:d,routeId:l});Le(i,l,G);return}let b=a.fetchers.get(i),R=M({state:"submitting"},v,{data:b&&b.data," _hasFetcherDoneAnything ":!0});a.fetchers.set(i,R),H({fetchers:new Map(a.fetchers)});let y=new AbortController,A=ve(e.history,d,y.signal,v);C.set(i,y);let P=await ye("action",A,m,p,r,t,L.basename);if(A.signal.aborted){C.get(i)===y&&C.delete(i);return}if(ie(P)){C.delete(i),Me.add(i);let G=M({state:"loading"},v,{data:void 0," _hasFetcherDoneAnything ":!0});return a.fetchers.set(i,G),H({fetchers:new Map(a.fetchers)}),fe(a,P,{submission:v,isFetchActionRedirect:!0})}if(Re(P)){Le(i,l,P.error);return}if(ee(P))throw Y(400,{type:"defer-action"});let $=a.navigation.location||a.location,j=ve(e.history,$,y.signal),B=n||o,K=a.navigation.state!=="idle"?be(B,a.navigation.location,e.basename):a.matches;U(K,"Didn't find any matches after fetcher action");let me=++se;ce.set(i,me);let Ce=M({state:"loading",data:P.data},v,{" _hasFetcherDoneAnything ":!0});a.fetchers.set(i,Ce);let[pe,ae]=Qe(e.history,a,K,v,$,S,O,k,ne,B,e.basename,{[m.route.id]:P.data},void 0);ae.filter(G=>G.key!==i).forEach(G=>{let _e=G.key,Ve=a.fetchers.get(_e),Ot={state:"loading",data:Ve&&Ve.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};a.fetchers.set(_e,Ot),C.set(_e,y)}),H({fetchers:new Map(a.fetchers)});let{results:Fe,loaderResults:Te,fetcherResults:W}=await Be(a.matches,K,pe,ae,j);if(y.signal.aborted)return;ce.delete(i),C.delete(i),ae.forEach(G=>C.delete(G.key));let V=at(Fe);if(V)return fe(a,V);let{loaderData:Z,errors:ge}=tt(a,a.matches,pe,Te,void 0,ae,W,Q),_t={state:"idle",data:P.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};a.fetchers.set(i,_t);let It=We(me);a.navigation.state==="loading"&&me>de?(U(E,"Expected pending action"),x&&x.abort(),ue(a.navigation.location,{matches:K,loaderData:Z,errors:ge,fetchers:new Map(a.fetchers)})):(H(M({errors:ge,loaderData:rt(a.loaderData,Z,K,ge)},It?{fetchers:new Map(a.fetchers)}:{})),S=!1)}async function Lt(i,l,d,m,p,v){let b=a.fetchers.get(i),R=M({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},v,{data:b&&b.data," _hasFetcherDoneAnything ":!0});a.fetchers.set(i,R),H({fetchers:new Map(a.fetchers)});let y=new AbortController,A=ve(e.history,d,y.signal);C.set(i,y);let P=await ye("loader",A,m,p,r,t,L.basename);if(ee(P)&&(P=await vt(P,A.signal,!0)||P),C.get(i)===y&&C.delete(i),A.signal.aborted)return;if(ie(P)){await fe(a,P);return}if(Re(P)){let j=oe(a.matches,l);a.fetchers.delete(i),H({fetchers:new Map(a.fetchers),errors:{[j.route.id]:P.error}});return}U(!ee(P),"Unhandled fetcher deferred data");let $={state:"idle",data:P.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};a.fetchers.set(i,$),H({fetchers:new Map(a.fetchers)})}async function fe(i,l,d){var m;let{submission:p,replace:v,isFetchActionRedirect:b}=d===void 0?{}:d;l.revalidate&&(S=!0);let R=De(i.location,l.location,M({_isRedirect:!0},b?{_isFetchActionRedirect:!0}:{}));if(U(R,"Expected a location on the redirect navigation"),ht.test(l.location)&&mt&&typeof((m=window)==null?void 0:m.location)<"u"){let B=e.history.createURL(l.location),K=je(B.pathname,e.basename||"/")==null;if(window.location.origin!==B.origin||K){v?window.location.replace(l.location):window.location.assign(l.location);return}}x=null;let y=v===!0?N.Replace:N.Push,{formMethod:A,formAction:P,formEncType:$,formData:j}=i.navigation;!p&&A&&P&&j&&$&&(p={formMethod:A,formAction:P,formEncType:$,formData:j}),fr.has(l.status)&&p&&X(p.formMethod)?await J(y,R,{submission:M({},p,{formAction:l.location}),preventScrollReset:F}):b?await J(y,R,{overrideNavigation:{state:"loading",location:R,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:p,preventScrollReset:F}):await J(y,R,{overrideNavigation:{state:"loading",location:R,formMethod:p?p.formMethod:void 0,formAction:p?p.formAction:void 0,formEncType:p?p.formEncType:void 0,formData:p?p.formData:void 0},preventScrollReset:F})}async function Be(i,l,d,m,p){let v=await Promise.all([...d.map(y=>ye("loader",p,y,l,r,t,L.basename)),...m.map(y=>y.matches&&y.match?ye("loader",ve(e.history,y.path,p.signal),y.match,y.matches,r,t,L.basename):{type:z.error,error:Y(404,{pathname:y.path})})]),b=v.slice(0,d.length),R=v.slice(d.length);return await Promise.all([ot(i,d,b,p.signal,!1,a.loaderData),ot(i,m.map(y=>y.match),R,p.signal,!0)]),{results:v,loaderResults:b,fetcherResults:R}}function Se(){S=!0,O.push(...Ue()),ne.forEach((i,l)=>{C.has(l)&&(k.push(l),Ee(l))})}function Le(i,l,d){let m=oe(a.matches,l);Ae(i),H({errors:{[m.route.id]:d},fetchers:new Map(a.fetchers)})}function Ae(i){C.has(i)&&Ee(i),ne.delete(i),ce.delete(i),Me.delete(i),a.fetchers.delete(i)}function Ee(i){let l=C.get(i);U(l,"Expected fetch controller: "+i),l.abort(),C.delete(i)}function He(i){for(let l of i){let m={state:"idle",data:ke(l).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};a.fetchers.set(l,m)}}function At(){let i=[];for(let l of Me){let d=a.fetchers.get(l);U(d,"Expected fetcher: "+l),d.state==="loading"&&(Me.delete(l),i.push(l))}He(i)}function We(i){let l=[];for(let[d,m]of ce)if(m<i){let p=a.fetchers.get(d);U(p,"Expected fetcher: "+d),p.state==="loading"&&(Ee(d),ce.delete(d),l.push(d))}return He(l),l.length>0}function Ut(i,l){let d=a.blockers.get(i)||qe;return q.get(i)!==l&&q.set(i,l),d}function he(i){a.blockers.delete(i),q.delete(i)}function xe(i,l){let d=a.blockers.get(i)||qe;U(d.state==="unblocked"&&l.state==="blocked"||d.state==="blocked"&&l.state==="blocked"||d.state==="blocked"&&l.state==="proceeding"||d.state==="blocked"&&l.state==="unblocked"||d.state==="proceeding"&&l.state==="unblocked","Invalid blocker state transition: "+d.state+" -> "+l.state),a.blockers.set(i,l),H({blockers:new Map(a.blockers)})}function $e(i){let{currentLocation:l,nextLocation:d,historyAction:m}=i;if(q.size===0)return;q.size>1&&le(!1,"A router only supports one blocker at a time");let p=Array.from(q.entries()),[v,b]=p[p.length-1],R=a.blockers.get(v);if(!(R&&R.state==="proceeding")&&b({currentLocation:l,nextLocation:d,historyAction:m}))return v}function Ue(i){let l=[];return Q.forEach((d,m)=>{(!i||i(m))&&(d.cancel(),l.push(m),Q.delete(m))}),l}function Ct(i,l,d){if(f=i,h=l,w=d||(m=>m.key),!g&&a.navigation===Oe){g=!0;let m=Ke(a.location,a.matches);m!=null&&H({restoreScrollPosition:m})}return()=>{f=null,h=null,w=null}}function Ft(i,l){if(f&&w&&h){let d=l.map(p=>it(p,a.loaderData)),m=w(i,d)||i.key;f[m]=h()}}function Ke(i,l){if(f&&w&&h){let d=l.map(v=>it(v,a.loaderData)),m=w(i,d)||i.key,p=f[m];if(typeof p=="number")return p}return null}function Tt(i){n=i}return L={get basename(){return e.basename},get state(){return a},get routes(){return o},initialize:wt,subscribe:Dt,enableScrollRestoration:Ct,navigate:Ne,fetch:Pt,revalidate:Mt,createHref:i=>e.history.createHref(i),encodeLocation:i=>e.history.encodeLocation(i),getFetcher:ke,deleteFetcher:Ae,dispose:Rt,getBlocker:Ut,deleteBlocker:he,_internalFetchControllers:C,_internalActiveDeferreds:Q,_internalSetRoutes:Tt},L}function gr(e){return e!=null&&"formData"in e}function Je(e,t,r,o){o===void 0&&(o=!1);let n=typeof e=="string"?e:te(e);if(!r||!gr(r))return{path:n};if(r.formMethod&&!Mr(r.formMethod))return{path:n,error:Y(405,{method:r.formMethod})};let c;if(r.formData){let f=r.formMethod||"get";if(c={formMethod:t.v7_normalizeFormMethod?f.toUpperCase():f.toLowerCase(),formAction:yt(n),formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:r.formData},X(c.formMethod))return{path:n,submission:c}}let s=re(n),u=gt(r.formData);return o&&s.search&&bt(s.search)&&u.append("index",""),s.search="?"+u,{path:te(s),submission:c}}function yr(e,t){let r=e;if(t){let o=e.findIndex(n=>n.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function Qe(e,t,r,o,n,c,s,u,f,w,h,g,D){let _=D?Object.values(D)[0]:g?Object.values(g)[0]:void 0,I=e.createURL(t.location),L=e.createURL(n),a=c||I.toString()===L.toString()||I.search!==L.search,E=D?Object.keys(D)[0]:void 0,x=yr(r,E).filter((S,O)=>{if(S.route.lazy)return!0;if(S.route.loader==null)return!1;if(vr(t.loaderData,t.matches[O],S)||s.some(se=>se===S.route.id))return!0;let k=t.matches[O],C=S;return Ze(S,M({currentUrl:I,currentParams:k.params,nextUrl:L,nextParams:C.params},o,{actionResult:_,defaultShouldRevalidate:a||pt(k,C)}))}),T=[];return f.forEach((S,O)=>{if(!r.some(de=>de.route.id===S.routeId))return;let k=be(w,S.path,h);if(!k){T.push(M({key:O},S,{matches:null,match:null}));return}let C=ze(k,S.path);if(u.includes(O)){T.push(M({key:O,matches:k,match:C},S));return}Ze(C,M({currentUrl:I,currentParams:t.matches[t.matches.length-1].params,nextUrl:L,nextParams:r[r.length-1].params},o,{actionResult:_,defaultShouldRevalidate:a}))&&T.push(M({key:O,matches:k,match:C},S))}),[x,T]}function vr(e,t,r){let o=!t||r.route.id!==t.route.id,n=e[r.route.id]===void 0;return o||n}function pt(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ze(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function et(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let n=r[e.id];U(n,"No route found in manifest");let c={};for(let s in o){let f=n[s]!==void 0&&s!=="hasErrorBoundary";le(!f,'Route "'+n.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!f&&!Nt.has(s)&&(c[s]=o[s])}Object.assign(n,c),Object.assign(n,{hasErrorBoundary:t(M({},n)),lazy:void 0})}async function ye(e,t,r,o,n,c,s,u,f,w){s===void 0&&(s="/"),u===void 0&&(u=!1),f===void 0&&(f=!1);let h,g,D,_=a=>{let E,F=new Promise((x,T)=>E=T);return D=()=>E(),t.signal.addEventListener("abort",D),Promise.race([a({request:t,params:r.params,context:w}),F])};try{let a=r.route[e];if(r.route.lazy)if(a)g=(await Promise.all([_(a),et(r.route,c,n)]))[0];else if(await et(r.route,c,n),a=r.route[e],a)g=await _(a);else{if(e==="action")throw Y(405,{method:t.method,pathname:new URL(t.url).pathname,routeId:r.route.id});return{type:z.data,data:void 0}}else U(a,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),g=await _(a);U(g!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(a){h=z.error,g=a}finally{D&&t.signal.removeEventListener("abort",D)}if(Dr(g)){let a=g.status;if(ur.has(a)){let x=g.headers.get("Location");if(U(x,"Redirects returned/thrown from loaders/actions must have a Location header"),ht.test(x)){if(!u){let T=new URL(t.url),S=x.startsWith("//")?new URL(T.protocol+x):new URL(x),O=je(S.pathname,s)!=null;S.origin===T.origin&&O&&(x=S.pathname+S.search+S.hash)}}else{let T=o.slice(0,o.indexOf(r)+1),S=ct(T).map(k=>k.pathnameBase),O=nr(x,S,new URL(t.url).pathname);if(U(te(O),"Unable to resolve redirect location: "+x),s){let k=O.pathname;O.pathname=k==="/"?s:we([s,k])}x=te(O)}if(u)throw g.headers.set("Location",x),g;return{type:z.redirect,status:a,location:x,revalidate:g.headers.get("X-Remix-Revalidate")!==null}}if(f)throw{type:h||z.data,response:g};let E,F=g.headers.get("Content-Type");return F&&/\bapplication\/json\b/.test(F)?E=await g.json():E=await g.text(),h===z.error?{type:h,error:new ut(a,g.statusText,E),headers:g.headers}:{type:z.data,data:E,statusCode:g.status,headers:g.headers}}if(h===z.error)return{type:h,error:g};if(Rr(g)){var I,L;return{type:z.deferred,deferredData:g,statusCode:(I=g.init)==null?void 0:I.status,headers:((L=g.init)==null?void 0:L.headers)&&new Headers(g.init.headers)}}return{type:z.data,data:g}}function ve(e,t,r,o){let n=e.createURL(yt(t)).toString(),c={signal:r};if(o&&X(o.formMethod)){let{formMethod:s,formEncType:u,formData:f}=o;c.method=s.toUpperCase(),c.body=u==="application/x-www-form-urlencoded"?gt(f):f}return new Request(n,c)}function gt(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,o instanceof File?o.name:o);return t}function br(e,t,r,o,n){let c={},s=null,u,f=!1,w={};return r.forEach((h,g)=>{let D=t[g].route.id;if(U(!ie(h),"Cannot handle redirect results in processLoaderData"),Re(h)){let _=oe(e,D),I=h.error;o&&(I=Object.values(o)[0],o=void 0),s=s||{},s[_.route.id]==null&&(s[_.route.id]=I),c[D]=void 0,f||(f=!0,u=lr(h.error)?h.error.status:500),h.headers&&(w[D]=h.headers)}else ee(h)?(n.set(D,h.deferredData),c[D]=h.deferredData.data):c[D]=h.data,h.statusCode!=null&&h.statusCode!==200&&!f&&(u=h.statusCode),h.headers&&(w[D]=h.headers)}),o&&(s=o,c[Object.keys(o)[0]]=void 0),{loaderData:c,errors:s,statusCode:u||200,loaderHeaders:w}}function tt(e,t,r,o,n,c,s,u){let{loaderData:f,errors:w}=br(t,r,o,n,u);for(let h=0;h<c.length;h++){let{key:g,match:D}=c[h];U(s!==void 0&&s[h]!==void 0,"Did not find corresponding fetcher result");let _=s[h];if(Re(_)){let I=oe(e.matches,D==null?void 0:D.route.id);w&&w[I.route.id]||(w=M({},w,{[I.route.id]:_.error})),e.fetchers.delete(g)}else if(ie(_))U(!1,"Unhandled fetcher revalidation redirect");else if(ee(_))U(!1,"Unhandled fetcher deferred data");else{let I={state:"idle",data:_.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(g,I)}}return{loaderData:f,errors:w}}function rt(e,t,r,o){let n=M({},t);for(let c of r){let s=c.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(n[s]=t[s]):e[s]!==void 0&&c.route.loader&&(n[s]=e[s]),o&&o.hasOwnProperty(s))break}return n}function oe(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function nt(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Y(e,t){let{pathname:r,routeId:o,method:n,type:c}=t===void 0?{}:t,s="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(s="Bad Request",n&&r&&o?u="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":c==="defer-action"&&(u="defer() is not supported in actions")):e===403?(s="Forbidden",u='Route "'+o+'" does not match URL "'+r+'"'):e===404?(s="Not Found",u='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",n&&r&&o?u="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":n&&(u='Invalid request method "'+n.toUpperCase()+'"')),new ut(e||500,s,new Error(u),!0)}function at(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(ie(r))return r}}function yt(e){let t=typeof e=="string"?re(e):e;return te(M({},t,{hash:""}))}function wr(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function ee(e){return e.type===z.deferred}function Re(e){return e.type===z.error}function ie(e){return(e&&e.type)===z.redirect}function Rr(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Dr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Mr(e){return cr.has(e.toLowerCase())}function X(e){return sr.has(e.toLowerCase())}async function ot(e,t,r,o,n,c){for(let s=0;s<r.length;s++){let u=r[s],f=t[s];if(!f)continue;let w=e.find(g=>g.route.id===f.route.id),h=w!=null&&!pt(w,f)&&(c&&c[f.route.id])!==void 0;ee(u)&&(n||h)&&await vt(u,o,n).then(g=>{g&&(r[s]=g||r[s])})}}async function vt(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:z.data,data:e.deferredData.unwrappedData}}catch(n){return{type:z.error,error:n}}return{type:z.data,data:e.deferredData.data}}}function bt(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function it(e,t){let{route:r,pathname:o,params:n}=e;return{id:r.id,pathname:o,params:n,data:t[r.id],handle:r.handle}}function ze(e,t){let r=typeof t=="string"?re(t).search:t.search;if(e[e.length-1].route.index&&bt(r||""))return e[e.length-1];let o=ct(e);return o[o.length-1]}export{N as A,ut as E,lr as a,Er as b,xr as c,te as d,ct as g,U as i,we as j,be as m,re as p,nr as r,je as s};
